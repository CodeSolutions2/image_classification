<!DOCTYPE html>
<html>
<head></head>
<body>
	
  <h1 style='text-align: center; margin-bottom: -35px;'>CodeSolution2 - Image labeling webapp: Read files from URL and output label</h1>
  <br><br>


<div id="output" style="font-family:courier;font-size:24px;height:300px"></div>


  
  
<style>canvas {border: 1px solid black;}</style>

<!--  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script> -->
<!--  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@1.0.0"></script>  -->

<script>

  // -------------------------------------------------
	
  const outp = document.getElementById('output');

  // -------------------------------------------------
	
async function runit() {
	
  try {
    // Way 0
    // const fs = requestFileSystemSync(window.TEMPORARY, 1024 * 1024 /*1MB*/);
    // getAllEntries(fs.root.createReader());

    // Way 1
    // const directory = "https:github.com/CodeSolutions2/test_4_webapps";
    // var entries = readDirectory(directory);
    // for (var i=0; i<entries.length; i++){
    //		  outp.innerHTML += "<br/>" + entries[i];
    //}
    // TypeError: directory.createReader is not a function

    // Way 2
	  const repoOwner = 'CodeSolutions2';
const repoName = 'test_4_webapps';
	  var url = `https://api.github.com/repos/${repoOwner}/${repoName}/contents`;
	  //var options = {method : 'get', headers: headers, mode: 'no-cors'};
    await fetch(url).then(res => res.json()).then(data => {
	    
	    // const imageList = document.getElementById('image-list');

    data.forEach(file => {
      if (file.type === 'file' && file.name.match(/.(jpg|jpeg|png|gif)$/i)) {
        // const listItem = document.createElement('li');
        // const image = document.createElement('img');
        
        // image.src = file.download_url;
        outp.innerHTML += "Filename=" + file.name + ", file url=" + file.download_url + "<br/>";

        // listItem.appendChild(image);
        // imageList.appendChild(listItem);
      }
    });
  })
  .catch(error => {
    outp.innerHTML += error;
  });


	  
  } catch (error) {
    outp.innerHTML = error;
  }

}
runit();

  // -------------------------------------------------


</script>
</body>
</html>
