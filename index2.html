<!DOCTYPE html>
<html>
<head></head>
<body>
	
  <h1 style='text-align: center; margin-bottom: -35px;'>CodeSolution2 - Image labeling webapp: Read files from URL and output label</h1>
  <br><br>


<div id="output" style="font-family:courier;font-size:24px;height:300px"></div>


  
  
<style>canvas {border: 1px solid black;}</style>

<!--  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script> -->
<!--  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@1.0.0"></script>  -->

<script>

  // -------------------------------------------------
	
  const outp = document.getElementById('output');

  // -------------------------------------------------

  // Taking care of the browser-specific prefixes.
  // window.resolveLocalFileSystemURL = window.resolveLocalFileSystemURL || window.webkitResolveLocalFileSystemURL;

  // Taking care of the browser-specific prefixes.
  // window.requestFileSystemSync = window.webkitRequestFileSystemSync || window.requestFileSystemSync;
  // TypeError: requestFileSystemSync is not a function

  // Global for holding the list of entry file system URLs.
  const paths = [];

  // -------------------------------------------------
	
function getAllEntries(dirReader) {
  const entries = dirReader.readEntries();

  for (const entry of entries) {
    // Stash this entry's filesystem in URL
    const filepath = entry.toURL();
    paths.push(filepath);
    outp.innerHTML = filepath;
  }
}

  // -------------------------------------------------
	
function readDirectory(directory) {
  let dirReader = directory.createReader();
  let entries = [];

  let getEntries = () => {
    dirReader.readEntries(
      (results) => {
        if (results.length) {
          entries = entries.concat(toArray(results));
          getEntries();
        }
      },
      (error) => {
        /* handle error â€” error is a FileError object */
      },
    );
  };

  getEntries();
  return entries;
}


  // -------------------------------------------------

  try {
    // Way 0
    // const fs = requestFileSystemSync(window.TEMPORARY, 1024 * 1024 /*1MB*/);
    // getAllEntries(fs.root.createReader());

    // Way 1
	  const directory = "https:github.com/CodeSolutions2/test_4_webapps";
    var entries = readDirectory(directory);
	  for (var i=0; i<entries.length; i++){
		  outp.innerHTML += "<br/>" + entries[i];
	  }
	  
  } catch (error) {
    outp.innerHTML = error;
  }

  // -------------------------------------------------


</script>
</body>
</html>
